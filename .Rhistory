survey_results_schema<-tbl(conn, "survey_results_schema")
devtools::load_all("/Users/zukow/Documents/GitHub/RHiveS2")
options(java.parameters = "-Xmx8g")
cp=c("/Users/zukow/spark-2.2.1-bin-hadoop2.7/jars/hive-jdbc-1.2.1.spark2-standalone.jar","/Users/zukow/spark-2.2.1-bin-hadoop2.7/jars/commons-configuration-1.6.jar","/Users/zukow/spark-2.2.1-bin-hadoop2.7/jars/hadoop-common-2.7.3.jar")
.jinit(classpath=cp)
# drv <- JDBC("org.apache.hive.jdbc.HiveDriver","/Users/zukow/spark-2.2.1-bin-hadoop2.7/jars/hive-jdbc-1.2.1.spark2-standalone.jar",identifier.quote='`')
# conn <- DBI::dbConnect(drv,"jdbc:hive2://localhost:10000","so_survey_2019_hive")
#drv <- HiveS2("org.apache.hive.jdbc.HiveDriver","/Users/zukow/spark-2.2.1-bin-hadoop2.7/jars/hive-jdbc-1.2.1.spark2-standalone.jar",identifier.quote='`')
conn <- DBI::dbConnect(HiveS2("org.apache.hive.jdbc.HiveDriver","/Users/zukow/spark-2.2.1-bin-hadoop2.7/jars/hive-jdbc-1.2.1.spark2.jar",identifier.quote='`'),
host ="jdbc:hive2://localhost:",
port = "10000",
schema = "so_survey_2019_hive"
)
survey_results_schema<-tbl(conn, "survey_results_schema")
View(drv)
dbListTables(conn)
devtools::load_all("/Users/zukow/Documents/GitHub/RHiveS2")
survey_results_schema<-tbl(conn, "survey_results_schema")
View(survey_results_schema)
View(survey_results_schema)
survey_results_schema<-tbl(conn, "survey_results_public")
View(survey_results_schema)
survey_results_schema %>%
filter(Employment == "Employed full-time",
ConvertedComp >= 3e4,
ConvertedComp <= 3e5,
Age >= 18,
Country == "United States"
)
show_query(survey_results_public)
show_query(survey_results_schema)
survey_results_schema<-tbl(conn, "survey_results_public")
show_query(survey_results_schema %>%
filter(Employment == "Employed full-time",
ConvertedComp >= 3e4,
ConvertedComp <= 3e5,
Age >= 18,
Country == "United States"
))
survey_results_schema<-tbl(conn, "survey_results_schema")
View(survey_results_schema)
survey_results_schema<-tbl(conn, "survey_results_schema")%,%collect()
survey_results_schema<-tbl(conn, "survey_results_schema")%<%collect()
survey_results_schema<-tbl(conn, "survey_results_schema")%>%collect()
View(survey_results_schema)
View(survey_results_schema)
show_query(survey_results_schema %>%
filter(Employment == "Employed full-time",
Age >= 18,
Country == "Poland"
)%>%
mutate(LanguageWorkedWith = str_split(LanguageWorkedWith, pattern = ";")) %>%
unnest(LanguageWorkedWith) %>%
mutate(LanguageWorkedWith = case_when(
str_detect(str_to_lower(LanguageWorkedWith), "r") ~ "R",
str_detect(str_to_lower(LanguageWorkedWith), "python") ~ "Python",
TRUE ~ "Other") ) %>%
filter(DevType != "Other"))
show_query(survey_results_schema %>%
filter(Employment == "Employed full-time",
Age >= 18,
Country == "Poland"
)%>%
mutate(LanguageWorkedWith = str_split(LanguageWorkedWith, pattern = ";")) %>%
mutate(LanguageWorkedWith = case_when(
str_detect(str_to_lower(LanguageWorkedWith), "r") ~ "R",
str_detect(str_to_lower(LanguageWorkedWith), "python") ~ "Python",
TRUE ~ "Other") ) %>%
filter(DevType != "Other"))
show_query(survey_results_schema %>%
filter(Employment == "Employed full-time",
Age >= 18,
Country == "Poland"
))
show_query(survey_results_schema %>%
filter(Employment == "Employed full-time",
Age >= 18,
Country == "Germany"
))
show_query(survey_results_schema %>%
filter(Employment == "Employed full-time",
Age >= 18,
Country == "United States"
))
survey_results_schema<-tbl(conn, "survey_results_schema")
show_query(survey_results_schema %>%
filter(Employment == "Employed full-time",
Age >= 18,
Country == "United States"
))
show_query(survey_results_schema %>%
filter(Employment == "Employed full-time",
Age >= 18,
Country == "Poland"
)%>%
mutate(LanguageWorkedWith = str_split(LanguageWorkedWith, pattern = ";")) %>%
mutate(LanguageWorkedWith = case_when(
str_detect(str_to_lower(LanguageWorkedWith), "r") ~ "R",
str_detect(str_to_lower(LanguageWorkedWith), "python") ~ "Python",
TRUE ~ "Other") ) %>%
filter(DevType != "Other"))
show_query(survey_results_schema %>%
filter(Employment == "Employed full-time",
Age >= 18,
Country == "Poland"
)%>%
mutate(LanguageWorkedWith = str_split(LanguageWorkedWith, pattern = ";")) %>%
mutate(LanguageWorkedWith = case_when(
filter(str_to_lower(LanguageWorkedWith) == "r") ~ "R",
filter(str_to_lower(LanguageWorkedWith) == "python") ~ "Python",
TRUE ~ "Other") ) %>%
filter(DevType != "Other"))
View(survey_results_schema)
survey_results_schema_view<-tbl(conn, "survey_results_schema")%>%collect()
View(survey_results_schema_view)
View(survey_results_schema_view)
show_query(survey_results_schema %>%
filter(Employment == "Employed full-time",
Age >= 18,
Country == "Poland"
)%>%group_by(Student))
show_query(survey_results_schema %>%
filter(Employment == "Employed full-time",
Age >= 18,
Country == "Poland"
)%>%group_by(	EdLevel))
show_query(survey_results_schema %>%
filter(Employment == "Employed full-time",
Age >= 18,
Country == "Poland"
)%>%group_by('EdLevel'))
show_query(survey_results_schema %>%
filter(Employment == "Employed full-time",
Age >= 18,
Country == "Poland"
)%>%group_by(`EdLevel`))
show_query(survey_results_schema %>%
filter(Employment == "Employed full-time",
Age >= 18,
Country == "Poland"
)%>%group_by("EdLevel"))
edlevel<-survey_results_schema %>%
filter(Employment == "Employed full-time",
Age >= 18,
Country == "Poland"
)%>%group_by("EdLevel")
survey_results_schema %>%
filter(Employment == "Employed full-time",
Age >= 18,
Country == "Poland"
)%>%group_by("EdLevel")
edlevel<-survey_results_schema %>%
filter(Employment == "Employed full-time",
Age >= 18,
Country == "Poland"
)%>%group_by("EdLevel")%>%collect()
survey_results_public<-tbl(conn, "survey_results_public")
survey_results_public %>%
filter(Employment == "Employed full-time",
Age >= 18,
Country == "Poland"
)%>%group_by("EdLevel")
survey_results_public %>%
filter(Employment == "Employed full-time",
Age >= 18,
Country == "Poland"
)%>%group_by("Sudent")%>%summarise( n = (n))
survey_results_public %>%
filter(Employment == "Employed full-time",
Age >= 18,
Country == "Poland"
)%>%group_by("Sudent")%>%summary( n = (n))
survey_results_public %>%
filter(Employment == "Employed full-time",
Age >= 18,
Country == "Poland"
)%>%group_by("Sudent")%>%summary(n())
survey_results_public %>%
filter(Employment == "Employed full-time",
Age >= 18,
Country == "Poland")%>%
group_by("EdLevel")%>%summary(n())
show_query(survey_results_schema %>%
filter(Employment == "Employed full-time",
Age >= 18,
Country == "Poland"
)%>%group_by("EdLevel")%>%summary(n())
show_query(survey_results_schema %>%
filter(Employment == "Employed full-time",
Age >= 18,
Country == "Poland"
)%>%group_by("EdLevel")%>%summary(n()))
show_query(survey_results_schema %>%
filter(Employment == "Employed full-time",
Age >= 18,
Country == "Poland"
)%>%group_by("EdLevel")%>%summary(n()))
survey_results_public%>%
filter(Employment == "Employed full-time",
Age >= 18,
Country == "Poland")%>%
group_by("EdLevel")%>%summary(n = n())
survey_results_public%>%
filter(Employment == "Employed full-time",
Age >= 18,
Country == "Poland")%>%
group_by("EdLevel")%>%summarise(n = n())
survey_results_public%>%
filter(Employment == "Employed full-time",
Age >= 18,
Country == "Poland")%>%
group_by("Student")%>%summarise(n = n())
survey_results_public%>%
filter(Employment == "Employed full-time",
Age >= 18,
Country == "Poland")%>%
group_by(Student)%>%summarise(n = n())
show_query(survey_results_schema %>%
filter(Employment == "Employed full-time",
Age >= 18,
Country == "United States"
)%>%group_by("EdLevel")%>%summary(n()))
survey_results_public%>%
filter(Employment == "Employed full-time",
Age >= 18,
Country == "Poland")%>%
group_by(Student)%>%summarise(n = n())
show_query(survey_results_schema %>%
filter(Employment == "Employed full-time",
Age >= 18,
Country == "United States"
)%>%group_by("EdLevel")%>%summary(n()))
survey_results_public%>%
filter(Employment == "Employed full-time",
Age >= 18,
Country == "United States")%>%
group_by(Student)%>%summarise(n = n())
survey_results_public%>%
filter(Employment == "Employed full-time",
Country == "United States")%>%
group_by(Age)%>%summarise(n = n())
survey_results_public%>%
filter(Employment == "Employed full-time",
Country == "United States")%>%
group_by(Age)
survey_results_public%>%
filter(Employment == "Employed full-time",
Country == "United States")%>%
group_by(Hobbyist)%>%summarise(n =n())
survey_results_public%>%
filter(Employment == "Employed full-time",
Country == "United States")%>%
group_by(Hobbyist)%>%summarise(n())
survey_results_public%>%
filter(Employment == "Employed full-time",
Country == "United States")%>%
cpunt(Hobbyist)
survey_results_public%>%
filter(Employment == "Employed full-time",
Country == "United States")%>%
count(Hobbyist)
survey_results_public%>%
filter(Employment == "Employed full-time",
Country == "United States")%>%
count(EdLevel)
survey_results_public%>%
filter(Employment == "Employed full-time",
Country == "United States")%>%
select(EdLevel)
survey_results_public%>%
filter(Employment == "Employed full-time",
Country == "United States")%>%
group_by("EdLevel")select(n=n())
survey_results_public%>%
filter(Employment == "Employed full-time",
Country == "United States")%>%
group_by("EdLevel")%>%select(n=n())
survey_results_public%>%
filter(Employment == "Employed full-time",
Country == "United States")%>%
group_by("EdLevel")%>%select(n())
survey_results_public%>%
filter(Employment == "Employed full-time",
Country == "United States")%>%
group_by("EdLevel")%>%count(n())
survey_results_public%>%
filter(Employment == "Employed full-time",
Country == "United States")%>%
count(EdLevel)
survey_results_public%>%
filter(Employment == "Employed full-time",
Country == "United States")%>%
count(EdLevel, Age)
survey_results_public%>%
filter(Employment == "Employed full-time",
Country == "United States")%>%
summarise(Student)
survey_results_public%>%
filter(Employment == "Employed full-time",
Country == "United States")%>%
summarise(Student, n())
survey_results_public%>%
filter(Employment == "Employed full-time",
Country == "United States")%>%
group_by("Student")%>%summarise(n = n())
survey_results_public%>%
filter(Employment == "Employed full-time",
Country == "United States")%>%
group_by(Student)%>%summarise(n = n())
survey_results_public%>%
filter(Employment == "Employed full-time",
Country == "United States")%>%
select(Student)
survey_results_public%>%
filter(Employment == "Employed full-time",
Country == "United States",
Student == "No")%>%
group_by(Student)
survey_results_public%>%
filter(Employment == "Employed full-time",
Country == "United States",
Student == "No")%>%
summarise(n())
debugSource('~/Documents/GitHub/RHiveS2/sandbox.R', echo=TRUE)
debugSource('~/Documents/GitHub/RHiveS2/sandbox.R', echo=TRUE)
debugSource('~/Documents/GitHub/RHiveS2/sandbox.R', echo=TRUE)
debugSource('~/Documents/GitHub/RHiveS2/sandbox.R', echo=TRUE)
a <- survey_results_public%>%
filter(Employment == "Employed full-time",
Country == "United States",
Student == "No")
summarise(a, n())
a <- survey_results_public%>%
filter(Employment == "Employed full-time",
Country == "United States",
Student == "No")
summarise(a, count = n())
library(dplyr)
library(rJava)
library(RJDBC)
#library(RHiveS2)
devtools::load_all("/Users/zukow/Documents/GitHub/RHiveS2")
options(java.parameters = "-Xmx8g")
cp=c("/Users/zukow/spark-2.2.1-bin-hadoop2.7/jars/hive-jdbc-1.2.1.spark2-standalone.jar","/Users/zukow/spark-2.2.1-bin-hadoop2.7/jars/commons-configuration-1.6.jar","/Users/zukow/spark-2.2.1-bin-hadoop2.7/jars/hadoop-common-2.7.3.jar")
.jinit(classpath=cp)
# drv <- JDBC("org.apache.hive.jdbc.HiveDriver","/Users/zukow/spark-2.2.1-bin-hadoop2.7/jars/hive-jdbc-1.2.1.spark2-standalone.jar",identifier.quote='`')
# conn <- DBI::dbConnect(drv,"jdbc:hive2://localhost:10000","so_survey_2019_hive")
#drv <- HiveS2("org.apache.hive.jdbc.HiveDriver","/Users/zukow/spark-2.2.1-bin-hadoop2.7/jars/hive-jdbc-1.2.1.spark2-standalone.jar",identifier.quote='`')
conn <- DBI::dbConnect(HiveS2("org.apache.hive.jdbc.HiveDriver","/Users/zukow/spark-2.2.1-bin-hadoop2.7/jars/hive-jdbc-1.2.1.spark2.jar",identifier.quote='`'),
host ="jdbc:hive2://localhost:",
port = "10000",
schema = "so_survey_2019_hive"
)
library(dplyr)
library(rJava)
library(RJDBC)
#library(RHiveS2)
devtools::load_all("/Users/zukow/Documents/GitHub/RHiveS2")
options(java.parameters = "-Xmx8g")
cp=c("/Users/zukow/spark-2.2.1-bin-hadoop2.7/jars/hive-jdbc-1.2.1.spark2-standalone.jar","/Users/zukow/spark-2.2.1-bin-hadoop2.7/jars/commons-configuration-1.6.jar","/Users/zukow/spark-2.2.1-bin-hadoop2.7/jars/hadoop-common-2.7.3.jar")
.jinit(classpath=cp)
# drv <- JDBC("org.apache.hive.jdbc.HiveDriver","/Users/zukow/spark-2.2.1-bin-hadoop2.7/jars/hive-jdbc-1.2.1.spark2-standalone.jar",identifier.quote='`')
# conn <- DBI::dbConnect(drv,"jdbc:hive2://localhost:10000","so_survey_2019_hive")
#drv <- HiveS2("org.apache.hive.jdbc.HiveDriver","/Users/zukow/spark-2.2.1-bin-hadoop2.7/jars/hive-jdbc-1.2.1.spark2-standalone.jar",identifier.quote='`')
conn <- DBI::dbConnect(HiveS2("org.apache.hive.jdbc.HiveDriver","/Users/zukow/spark-2.2.1-bin-hadoop2.7/jars/hive-jdbc-1.2.1.spark2.jar",identifier.quote='`'),
host ="jdbc:hive2://localhost:",
port = "10000",
schema = "so_survey_2019_hive"
)
#survey_results_public<-tbl(conn, "survey_results_public")
# show(drv)
# show(conn)
# dbGetInfo(drv)
# dbGetInfo(conn)
#dbListTables(conn)
# hive_result <- dbSendQuery(conn, "select * from survey_results_schema")
# survey_results_schema <- fetch(hive_result, 100)
# dbGetInfo(hive_result)
# dbHasCompleted(hive_result)
# dbColumnInfo(hive_result)
survey_results_schema_view<-tbl(conn, "survey_results_schema")%>%collect()
survey_results_schema<-tbl(conn, "survey_results_schema")
survey_results_public<-tbl(conn, "survey_results_public")
survey_results_public%>%select(Respondent,Age)
filter(Employment == "Employed full-time",
Country == "United States")%>%arrange(desc(Age))%>%top_n(1)
survey_results_public%>%select(Respondent,Age)
filter(Employment == "Employed full-time",
Country == "United States")
survey_results_public%>%
filter(Employment == "Employed full-time",
Country == "United States")%>%select(Respondent,Age)
survey_results_public<-tbl(conn, "survey_results_public")%>%top_n(2)%>%collect()
survey_results_public<-tbl(conn, "survey_results_public")%>%head(6)
survey_results_public<-tbl(conn, "survey_results_public")%>%head(6)%>%collect()
View(survey_results_schema_view)
View(survey_results_public)
show_query(survey_results_public)
survey_results_public<-tbl(conn, "survey_results_public")%>%head(6)
show_query(survey_results_public)
show_query(  survey_results_public%>%
filter(Employment == "Employed full-time",
Country == "United States")%>%select(Respondent,Age)%>%arrange(desc(Age))%>%head(1))
survey_results_public<-tbl(conn, "survey_results_public")
show_query(  survey_results_public%>%
filter(Employment == "Employed full-time",
Country == "United States")%>%select(Respondent,Age)%>%arrange(desc(Age))%>%head(1))
show_query(younest)
show_query(youngest)
youngest <- survey_results_public%>%
filter(Employment == "Employed full-time",Country == "United States")%>%
select(Respondent,Age)%>%
arrange(Age)%>%
head(1)
show_query(youngest)
tbl(conn, "survey_results_public")%>%head(3)
survey_results_public<-tbl(conn, "survey_results_public")
survey_results_public%>%
filter(Employment == "Employed full-time",Country == "United States")%>%
select(Respondent,Age)%>%
arrange(Age)%>%
head(1)
tbl(conn, "survey_results_public")%>%
head(1)
cp=c("/Users/zukow/spark-2.2.1-bin-hadoop2.7/jars/hive-jdbc-1.2.1.spark2-standalone.jar","/Users/zukow/spark-2.2.1-bin-hadoop2.7/jars/commons-configuration-1.6.jar","/Users/zukow/spark-2.2.1-bin-hadoop2.7/jars/hadoop-common-2.7.3.jar")
.jinit(classpath=cp)
# drv <- JDBC("org.apache.hive.jdbc.HiveDriver","/Users/zukow/spark-2.2.1-bin-hadoop2.7/jars/hive-jdbc-1.2.1.spark2-standalone.jar",identifier.quote='`')
# conn <- DBI::dbConnect(drv,"jdbc:hive2://localhost:10000","so_survey_2019_hive")
#drv <- HiveS2("org.apache.hive.jdbc.HiveDriver","/Users/zukow/spark-2.2.1-bin-hadoop2.7/jars/hive-jdbc-1.2.1.spark2-standalone.jar",identifier.quote='`')
conn <- DBI::dbConnect(HiveS2("org.apache.hive.jdbc.HiveDriver","/Users/zukow/spark-2.2.1-bin-hadoop2.7/jars/hive-jdbc-1.2.1.spark2.jar",identifier.quote='`'),
host ="jdbc:hive2://localhost:",
port = "10000",
schema = "so_survey_2019_hive"
)
survey_results_public<-tbl(conn, "survey_results_public")%>%
head(1)
tbl(conn, "survey_results_public")%>%
head(1)
youngest <- survey_results_public%>%
filter(employment == "Employed full-time",country == "United States")%>%
select(respondent,age)%>%
arrange(age)%>%
head(1)
View(youngest)
youngest <- survey_results_public%>%
filter(employment == "Employed full-time",country == "United States")%>%
select(respondent,age)%>%
arrange(age)%>%
head(1)%>%collect
View(youngest)
survey_results_public%>%
filter(employment == "Employed full-time",country == "United States")%>%
select(respondent,age)%>%
arrange(age)%>%
head(1)
survey_results_public<-tbl(conn, "survey_results_public")
survey_results_public%>%
filter(employment == "Employed full-time",country == "United States")%>%
select(respondent,age)%>%
arrange(age)%>%
head(1)
show_query(survey_results_public%>%
filter(employment == "Employed full-time",country == "United States")%>%
select(respondent,age)%>%
arrange(age)%>%
head(1))
show_query(youngest)
youngest <- survey_results_public%>%
filter(employment == "Employed full-time",country == "United States")%>%
select(respondent,age)%>%
arrange(age)%>%
head(1)
show_query(youngest)
devtools::check()
library(RJDBC)
devtools::check()
devtools::check()
devtools::check()
getwd()
devtools::load_all()
devtools::check()
devtools::check()
(getGeneric("dbQuoteIdentifier")
)
showMethods("dbQuoteIdentifier")
devtools::check()
devtools::check()
devtools::check()
library(DBI)
devtools::check()
detach("package:DBI", unload = TRUE)
detach("package:RJDBC", unload = TRUE)
detach("package:RHiveS2", unload = TRUE)
library(DBI)
library(RJDBC)
devtools::check()
devtools::check()
devtools::document()
devtools::check()
DBI::valid()
remove.packages("DBI")
install.packages("DBI")
library(DBI)
library(RJDBC)
remove.packages("DBItest")
devtools::document()
devtools::check()
devtools::check()
devtools::document()
devtools::document()
devtools::check()
devtools::check()
